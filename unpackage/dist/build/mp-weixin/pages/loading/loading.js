(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/loading/loading"],{"0632":function(e,o,n){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;getApp();var t=n("3182"),s={data:function(){return{loadingHidden:!0,subq:"",port:"",systemInfo:"",systemType:0}},onLoad:function(e){this.setData({loadingHidden:!1});var o=this;console.log("index 生命周期 onload"+JSON.stringify(e));var n=decodeURIComponent(e.q);n&&(console.log("index 生命周期 onload url="+n),console.log("index 生命周期 onload 参数 flag="+t.getQueryString(n,"flag")));var s=n.length,c=n.indexOf("https://www.tengfuchong.cn/applet");if(-1!=c){var u=n.lastIndexOf("/"),a=n.substr(u+1,6),i=n.substr(s-1);console.log("index"+u+"---截取字符串==="+a),console.log("端口号==="+i),o.setData({subq:a,port:i}),o.aaa()}},onReady:function(){},onShow:function(){var o=this;e.stopBluetoothDevicesDiscovery({success:function(e){}}),e.closeBluetoothAdapter({success:function(e){}}),e.request({url:"https://app.tengfuchong.com/applet/findDeviceId",data:{code:o.subq,systemType:o.systemType},header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(n){var t=n.data.deviceid,s=0;s=n.data.merid,e.openBluetoothAdapter({success:function(n){console.log("初始化蓝牙适配器成功"),e.startBluetoothDevicesDiscovery({services:["FFE0"],allowDuplicatesKey:!1,success:function(n){console.log("这里是开始搜索附近设备",n),e.onBluetoothDeviceFound((function(n){if(console.log("成功",n),void 0!=n.devices[0].name&&(-1!=n.devices[0].name.indexOf("HD-"+o.subq)||-1!=n.devices[0].name.indexOf("JDY-08"))){var c=o.systemType;1==c&&(t=n.devices[0].deviceId),e.request({url:"https://app.tengfuchong.com/applet/queryCodeBindPhone?code="+o.subq,success:function(n){e.redirectTo({url:"../incoins/incoins?id="+t+"&name="+o.subq+"&port="+o.port+"&phonenum="+n.data+"&merid="+s})}})}}))}})},fail:function(){e.closeBluetoothAdapter({success:function(o){e.redirectTo({url:"../warn/warn"})}})}})},fail:function(){console.log("服务器异常")}})},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){e.stopBluetoothDevicesDiscovery({success:function(e){}}),e.closeBluetoothAdapter({success:function(e){}}),this.loadBletooth()},onReachBottom:function(){},onShareAppMessage:function(){},methods:{aaa:function(){var o=this;e.getSystemInfo({success:function(e){o.setData({systemInfo:e}),console.log("res==="+e),"devtools"==e.platform?console.log("访问来源"+e.platform):"ios"==e.platform?(o.setData({systemType:1}),console.log("访问来源"+e.platform)):"android"==e.platform&&(o.setData({systemType:2}),console.log("访问来源"+e.platform))}})},loadBletooth:function(){var o=this;e.request({url:"https://app.tengfuchong.com/applet/findDeviceId",data:{code:o.subq,systemType:o.systemType},header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(n){var t=n.data;e.openBluetoothAdapter({success:function(n){console.log("初始化蓝牙适配器成功"),e.startBluetoothDevicesDiscovery({services:[],allowDuplicatesKey:!1,success:function(n){console.log("这里是开始搜索附近设备",n),e.onBluetoothDeviceFound((function(n){console.log("成功",n),void 0==n.devices[0].name||-1==n.devices[0].name.indexOf("HD-"+o.subq)&&-1==n.devices[0].name.indexOf("JDY-08")||(e.stopPullDownRefresh(),e.request({url:"https://app.tengfuchong.com/applet/queryCodeBindPhone?code="+o.subq,success:function(n){e.redirectTo({url:"../incoins/incoins?id="+t+"&name="+o.subq+"&port="+o.port+"&phonenum="+n.data})}}))}))}})},fail:function(){e.closeBluetoothAdapter({success:function(o){e.redirectTo({url:"../warn/warn"})}})}})},fail:function(){console.log("服务器异常")}})}}};o.default=s}).call(this,n("543d")["default"])},2937:function(e,o,n){"use strict";var t;n.d(o,"b",(function(){return s})),n.d(o,"c",(function(){return c})),n.d(o,"a",(function(){return t}));var s=function(){var e=this,o=e.$createElement;e._self._c},c=[]},"3c9b":function(e,o,n){"use strict";n.r(o);var t=n("2937"),s=n("9e29");for(var c in s)"default"!==c&&function(e){n.d(o,e,(function(){return s[e]}))}(c);n("62bd");var u,a=n("f0c5"),i=Object(a["a"])(s["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],u);o["default"]=i.exports},"62bd":function(e,o,n){"use strict";var t=n("84b0"),s=n.n(t);s.a},"84b0":function(e,o,n){},"9e29":function(e,o,n){"use strict";n.r(o);var t=n("0632"),s=n.n(t);for(var c in t)"default"!==c&&function(e){n.d(o,e,(function(){return t[e]}))}(c);o["default"]=s.a},d05a:function(e,o,n){"use strict";(function(e){n("c4da");t(n("66fd"));var o=t(n("3c9b"));function t(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("543d")["createPage"])}},[["d05a","common/runtime","common/vendor"]]]);