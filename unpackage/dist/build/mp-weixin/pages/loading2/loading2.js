(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/loading2/loading2"],{1597:function(e,o,t){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;getApp(),t("915c");var n={data:function(){return{loadingHidden:!0,subq:"",port:"",systemInfo:"",systemType:0}},onLoad:function(e){this.setData({loadingHidden:!1}),this.setData({subq:e.deviceCode,port:e.port}),this.aaa()},onReady:function(){},onShow:function(){var o=this;e.stopBluetoothDevicesDiscovery({success:function(e){}}),e.closeBluetoothAdapter({success:function(e){}}),e.request({url:"https://app.tengfuchong.com/applet/findDeviceId",data:{code:o.subq,systemType:o.systemType},header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){var n=t.data.deviceid,c=0;c=t.data.merid,e.openBluetoothAdapter({success:function(t){console.log("初始化蓝牙适配器成功"),e.startBluetoothDevicesDiscovery({services:[],allowDuplicatesKey:!1,success:function(t){console.log("这里是开始搜索附近设备",t),e.onBluetoothDeviceFound((function(t){if(console.log("成功",t),void 0!=t.devices[0].name&&(-1!=t.devices[0].name.indexOf("HD-"+o.subq)||-1!=t.devices[0].name.indexOf("JDY-08"))){var s=o.systemType;1==s&&(n=t.devices[0].deviceId),e.request({url:"https://app.tengfuchong.com/applet/queryCodeBindPhone?code="+o.subq,success:function(t){e.redirectTo({url:"../incoins/incoins?id="+n+"&name="+o.subq+"&port="+o.port+"&phonenum="+t.data+"&merid="+c})}})}}))}})},fail:function(){e.closeBluetoothAdapter({success:function(o){e.redirectTo({url:"../warn/warn"})}})}})},fail:function(){console.log("服务器异常")}})},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){e.stopBluetoothDevicesDiscovery({success:function(e){}}),e.closeBluetoothAdapter({success:function(e){}}),this.loadBletooth()},onReachBottom:function(){},onShareAppMessage:function(){},methods:{aaa:function(){var o=this;e.getSystemInfo({success:function(e){o.setData({systemInfo:e}),console.log("res==="+e),"devtools"==e.platform?console.log("访问来源"+e.platform):"ios"==e.platform?(o.setData({systemType:1}),console.log("访问来源"+e.platform)):"android"==e.platform&&(o.setData({systemType:2}),console.log("访问来源"+e.platform))}})},loadBletooth:function(){var o=this;e.request({url:"https://app.tengfuchong.com/applet/findDeviceId",data:{code:o.subq,systemType:o.systemType},header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){var n=t.data;e.openBluetoothAdapter({success:function(t){console.log("初始化蓝牙适配器成功"),e.startBluetoothDevicesDiscovery({services:[],allowDuplicatesKey:!1,success:function(t){console.log("这里是开始搜索附近设备",t),e.onBluetoothDeviceFound((function(t){console.log("成功",t),-1!=t.devices[0].name.indexOf("JDY-08")&&(e.stopPullDownRefresh(),e.request({url:"https://app.tengfuchong.com/applet/queryCodeBindPhone?code="+o.subq,success:function(t){e.redirectTo({url:"../incoins/incoins?id="+n+"&name="+o.subq+"&port="+o.port+"&phonenum="+t.data})}}))}))}})}})},fail:function(){e.closeBluetoothAdapter({success:function(o){e.redirectTo({url:"../warn/warn"})}})}})}}};o.default=n}).call(this,t("543d")["default"])},"1d5e":function(e,o,t){"use strict";var n;t.d(o,"b",(function(){return c})),t.d(o,"c",(function(){return s})),t.d(o,"a",(function(){return n}));var c=function(){var e=this,o=e.$createElement;e._self._c},s=[]},2092:function(e,o,t){"use strict";t.r(o);var n=t("1d5e"),c=t("223d");for(var s in c)"default"!==s&&function(e){t.d(o,e,(function(){return c[e]}))}(s);t("384b");var u,i=t("f0c5"),a=Object(i["a"])(c["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],u);o["default"]=a.exports},"223d":function(e,o,t){"use strict";t.r(o);var n=t("1597"),c=t.n(n);for(var s in n)"default"!==s&&function(e){t.d(o,e,(function(){return n[e]}))}(s);o["default"]=c.a},"384b":function(e,o,t){"use strict";var n=t("6428"),c=t.n(n);c.a},6428:function(e,o,t){},"755c":function(e,o,t){"use strict";(function(e){t("fd64");n(t("66fd"));var o=n(t("2092"));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(o.default)}).call(this,t("543d")["createPage"])}},[["755c","common/runtime","common/vendor"]]]);