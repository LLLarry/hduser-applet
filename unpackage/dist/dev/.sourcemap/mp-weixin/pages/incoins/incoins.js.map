{"version":3,"sources":["uni-app:///main.js","webpack:///E:/工作区/hd-resource/hduser-applet/pages/incoins/incoins.vue?d8ad","webpack:///E:/工作区/hd-resource/hduser-applet/pages/incoins/incoins.vue?f585","webpack:///E:/工作区/hd-resource/hduser-applet/pages/incoins/incoins.vue?e48e","webpack:///E:/工作区/hd-resource/hduser-applet/pages/incoins/incoins.vue?4b47","uni-app:///pages/incoins/incoins.vue","webpack:///E:/工作区/hd-resource/hduser-applet/pages/incoins/incoins.vue?6f12","webpack:///E:/工作区/hd-resource/hduser-applet/pages/incoins/incoins.vue?f3bd"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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AACA,mCADA;AAEA,qCAFA;AAGA,oDAHA;AAIA,yBAJA;AAKA;AACA;AACA;AACA,aARA;AASA;AACA;AACA;;AAEA;AACA,uCADA;AAEA,yCAFA;AAGA,wDAHA;AAIA,6BAJA;AAKA;AACA,8BADA,CACA;AACA,iBAPA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BADA;AAEA,yCAFA;AAGA,qCAHA;AAIA;AACA;AACA;AACA,iDADA;;AAGA;AACA,qBAVA;AAWA;AACA,iBA9BA;;AAgCA,aA7CA;;AA+CA,SA5DA;;AA8DA,KA1ZA;;AA4ZA;AACA;AACA;AACA,sBADA;;AAGA;AACA,kDADA;AAEA;AACA;AACA,SAJA;;AAMA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAPA;AAQA;AACA;AACA;AACA;AACA;AACA,0DADA;AAEA;AACA,4BADA;AAEA,iCAFA;AAGA,mCAHA;AAIA,6BAJA,EAFA;;AAQA;AACA,iEADA,CACA;AADA,aARA;AAWA,0BAXA;AAYA;AACA;AACA,aAdA;AAeA;AACA;AACA,4BADA;AAEA,oCAFA;;AAIA,aApBA;;AAsBA,SA1BA;AA2BA;AACA;AACA,iCADA;AAEA;AACA;AACA,uCADA;AAEA,8CAFA;AAGA,2CAHA;;AAKA,aARA;;AAUA,SAtCA;;AAwCA,KAvdA;;AAydA,WAzdA,mBAydA,KAzdA,EAydA;AACA,sBADA,CACA;;AAEA;AACA,kCADA;AAEA;AACA,gCAHA;AAIA,gCAJA;AAKA,uBALA;AAMA,8BANA;AAOA;AACA;AACA;AACA,yBADA;AAEA,2BAFA;AAGA,0BAHA;AAIA;AACA;AACA,6BADA;AAEA;AACA;AACA,2CADA;AAEA;AACA;AACA,+CADA;;AAGA,qBANA;;AAQA,iBAXA;;AAaA,aAlBA;;AAoBA,SA7BA;AA8BA;AACA;AACA;AACA,yBADA;;AAGA;AACA,2BADA;;AAGA,SAtCA;AAuCA,wCAvCA;;AAyCA,KArgBA;;AAugBA;AACA;AACA,yCADA;AAEA;AACA;AACA,iCADA;;AAGA;AACA,mCADA;;AAGA,SATA;;AAWA,KAnhBA;;AAqhBA,YArhBA,sBAqhBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QADA;AAEA,WAFA;AAGA,QAHA;AAIA,WAJA;AAKA,QALA;AAMA,WANA;AAOA,QAPA;AAQA,WARA;AASA,QATA;AAUA,WAVA;AAWA,QAXA;AAYA,WAbA;AAcA;;AAEA;AACA;AACA;AACA;AACA,mDAFA,CAEA;;AAEA;AACA,0CADA;AAEA;AACA;;AAEA;AACA;AACA,yEADA,CACA;AACA;;AAEA,wEAJA,CAIA;;AAEA,mDANA,CAMA;AACA,aAPA,MAOA;AACA;AACA;AACA,WApBA,CAoBA;;AAEA;AACA;AACA,kCADA,CACA;;AAEA,yDAHA,CAGA;AACA,aAJA,EAIA,WAJA;AAKA,WANA;AAOA;;AAEA;AACA;AACA;AACA,oCADA;;AAGA,SApCA,MAoCA;AACA;;AAEA;AACA,oDAJA,CAIA;AACA;;AAEA;AACA;AACA,kEADA,CADA,CAEA;AACA;;AAEA,wCAZA,CAYA;AACA;;AAEA,mEAfA,CAeA;;AAEA;AACA;AACA,mDADA,CACA;;AAEA,sDAHA,CAGA;;AAEA,sCALA,CAKA;AACA,aANA,MAMA;AACA;AACA,4CAFA,CAEA;AACA;AACA,WA5BA,CA4BA;;AAEA;AACA;AACA,kCADA,CACA;;AAEA,yDAHA,CAGA;AACA,aAJA,EAIA,WAJA;AAKA,WANA;AAOA;;AAEA;AACA;AACA;AACA,oCADA;;AAGA;AACA,OAnFA,MAmFA;AACA;AACA;AACA,+CAHA,CAGA;;AAEA;;AAEA;AACA;AACA;AACA,kCADA;;AAGA;AACA,KAppBA;;AAspBA;AACA;AACA;AACA,UADA,CACA,sBADA,EACA,wDADA;AAEA,UAFA,CAEA,EAFA;AAGA,KA3pBA;;AA6pBA;AACA;AACA;AACA;AACA;AACA;AACA,yEADA;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,yCADA;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KArsBA;;AAusBA;AACA;AACA;AACA;AACA,kCADA;AAEA;AACA;AACA,SAJA;;AAMA,KAhtBA;;AAktBA;AACA;AACA;AACA,+BADA;AAEA;AACA;AACA,mCADA;;AAGA,SANA;;AAQA,KA5tBA;;AA8tBA;AACA;AACA,uBADA;;AAGA,KAluBA,EAhPA,E;;;;;;;;;;;;;ACpDA;AAAA;AAAA;AAAA;AAA4kC,CAAgB,skCAAG,EAAC,C;;;;;;;;;;;ACAhmC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/incoins/incoins.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/incoins/incoins.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./incoins.vue?vue&type=template&id=318f91fc&\"\nvar renderjs\nimport script from \"./incoins.vue?vue&type=script&lang=js&\"\nexport * from \"./incoins.vue?vue&type=script&lang=js&\"\nimport style0 from \"./incoins.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/incoins/incoins.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./incoins.vue?vue&type=template&id=318f91fc&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./incoins.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./incoins.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"container\">\r\n    <view class=\"ad\">\r\n      <navigator>\r\n        <image class=\"adimg\" :src=\"adimg\" mode=\"widthFix\"></image>\r\n      </navigator>\r\n    </view>\r\n    <text class=\"connect_device_name\">当前设备：{{ deviceName }}</text>\r\n    <view class=\"choosemoney\">\r\n      <view class=\"title\">请选择投币方式</view>\r\n      <view class=\"tr\" v-for=\"(item, index) in items\" :key=\"index\">\r\n        <view\r\n          :class=\"'btn ' + (val == item.money ? 'active' : '')\"\r\n          @tap.stop.prevent=\"handle\"\r\n          :data-id=\"item.id\"\r\n          :data-value=\"item.remark\"\r\n          :data-money=\"item.money\"\r\n        >\r\n          {{ item.name }}\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <button\r\n      v-if=\"merid == 0\"\r\n      @tap=\"Sendincoins\"\r\n      class=\"addincoins\"\r\n      size=\"large\"\r\n      :disabled=\"disabled\"\r\n    >\r\n      模拟投币\r\n    </button>\r\n    <button\r\n      v-if=\"merid != 0\"\r\n      @tap=\"Payincoins\"\r\n      class=\"payincoins\"\r\n      size=\"large\"\r\n      :disabled=\"disabled\"\r\n    >\r\n      确认支付\r\n    </button>\r\n    <button @tap=\"Backhome\" class=\"payincoins goIndex\" size=\"large\">\r\n      回到首页\r\n    </button>\r\n    <view @tap=\"callPhone\" id=\"connect_phone\" style=\"width: 100%\">\r\n      联系商家：\r\n      <text>{{ phonenum }}</text>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nconst app = getApp();\r\nexport default {\r\n  data() {\r\n    return {\r\n      items: [\r\n        {\r\n          name: \"1元\",\r\n          money: \"1\",\r\n          remark: \"1\",\r\n        },\r\n        {\r\n          name: \"2元\",\r\n          money: \"2\",\r\n          remark: \"2\",\r\n        },\r\n        {\r\n          name: \"3元\",\r\n          money: \"3\",\r\n          remark: \"3\",\r\n        },\r\n        {\r\n          name: \"4元\",\r\n          money: \"4\",\r\n          remark: \"4\",\r\n        },\r\n        {\r\n          name: \"5元\",\r\n          money: \"5\",\r\n          remark: \"5\",\r\n        },\r\n        {\r\n          name: \"6元\",\r\n          money: \"6\",\r\n          remark: \"6\",\r\n        },\r\n      ],\r\n\r\n      val: 2,\r\n      money_value: 2,\r\n      openid: null,\r\n      merid: 0,\r\n      phonenum: \"4006315515\",\r\n      disabled: false,\r\n      deviceId: \"\",\r\n      deviceName: \"\",\r\n      port: \"\",\r\n      adimg: \"\",\r\n      serviceId: \"\",\r\n      tempid: \"\",\r\n      notycharacteristicsId: \"\",\r\n      characteristicsId: \"\",\r\n      recv_number: \"\",\r\n      recv_value: \"\",\r\n      send_number: \"\",\r\n    };\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */ onLoad: function (options) {\r\n    var that = this;\r\n    this.getTemp(options.name);\r\n    this.setData({\r\n      deviceId: options.id,\r\n      deviceName: options.name,\r\n      port: options.port,\r\n      adimg: \"/static/images/ad1.png\",\r\n      phonenum: options.phonenum,\r\n      merid: options.merid,\r\n      openid:\r\n        app.globalData.user && app.globalData.user.openid\r\n          ? app.globalData.user.openid\r\n          : \"\",\r\n    });\r\n    uni.stopBluetoothDevicesDiscovery({\r\n      success: function (res) {},\r\n    });\r\n    uni.login({\r\n      success: function (res) {\r\n        if (res.code) {\r\n          uni.getUserInfo({\r\n            withCredentials: true,\r\n            success: function (res) {\r\n              var objz = {};\r\n              objz.avatarUrl = res.userInfo.avatarUrl;\r\n              objz.nickName = res.userInfo.nickName;\r\n              uni.setStorageSync(\"userInfo\", objz); //存储userInfo\r\n            },\r\n          });\r\n\r\n          uni.request({\r\n            url:\r\n              \"https://app.tengfuchong.com/applet/getWxUserInfo?code=\" +\r\n              res.code,\r\n            success: function (res) {\r\n              const result = res.data;\r\n              if (result.code === 200) {\r\n                that.setData({\r\n                  openid: result.openid,\r\n                });\r\n              } else {\r\n                uni.showModal({\r\n                  title: \"提示\",\r\n                  content: result.message || \"未获取到用户\",\r\n                  success: function (res) {\r\n                    uni.switchTab({\r\n                      url: \"/pages/device/device\",\r\n                    });\r\n                  },\r\n                });\r\n              }\r\n            },\r\n            fail(err) {\r\n              console.log(\"error\", err);\r\n              uni.showModal({\r\n                title: \"提示\",\r\n                content: JSON.stringify(err),\r\n                success: function (res) {\r\n                  uni.switchTab({\r\n                    url: \"/pages/device/device\",\r\n                  });\r\n                },\r\n              });\r\n            },\r\n          });\r\n        }\r\n      },\r\n    });\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n    var that = this;\r\n    /* 初始化蓝牙适配器 */\r\n\r\n    uni.openBluetoothAdapter({\r\n      success: function (res) {\r\n        console.log(\"初始化蓝牙适配器成功\");\r\n        console.log(\"MAC===\" + that.deviceId);\r\n        /* 开始连接蓝牙设备 */\r\n\r\n        uni.showLoading({\r\n          title: \"连接中...\",\r\n          mask: true,\r\n        });\r\n        uni.createBLEConnection({\r\n          deviceId: that.deviceId,\r\n          success: function (res) {\r\n            // console.log('连接成功', res);\r\n            console.log(\"连接deviceId\", that.deviceId);\r\n            uni.hideLoading();\r\n            uni.showToast({\r\n              title: \"连接成功\",\r\n              duration: 1000,\r\n            });\r\n            /* 获取设备的服务UUID */\r\n\r\n            uni.getBLEDeviceServices({\r\n              deviceId: that.deviceId,\r\n              success: function (service) {\r\n                var all_UUID = service.services; //取出所有的服务\r\n                // console.log('所有的服务', all_UUID);\r\n\r\n                var UUID_lenght = all_UUID.length; //获取到服务数组的长度\r\n\r\n                /* 遍历服务数组 */\r\n\r\n                for (var index = 0; index < UUID_lenght; index++) {\r\n                  var ergodic_UUID = all_UUID[index].uuid; //取出服务里面的UUID\r\n\r\n                  var UUID_slice = ergodic_UUID.slice(4, 8); //截取4到8位\r\n\r\n                  /* 判断是否是我们需要的FEE0 */\r\n                  // console.log('uuid长度' + UUID_slice);\r\n                  // console.log('uuid判别' + (UUID_slice == 'FEE0' || UUID_slice == 'ffe0'));\r\n\r\n                  if (UUID_slice == \"FFE0\" || UUID_slice == \"ffe0\") {\r\n                    var index_uuid = index;\r\n                    that.setData({\r\n                      serviceId: all_UUID[index_uuid].uuid, //确定需要的服务UUID\r\n                    }); // console.log('uuid' + all_UUID[index_uuid].uuid)\r\n                  }\r\n                } // console.log('连接deviceId', that.data.deviceId);\r\n\r\n                that.Characteristics(); //调用获取特征值函数\r\n              },\r\n            });\r\n          },\r\n          fail: function (res) {\r\n            console.log(\"res===\" + res.errMsg);\r\n            uni.hideLoading();\r\n            uni.showModal({\r\n              title: \"提示\",\r\n              content: \"连接失败，请确认设备是否在线\",\r\n              showCancel: false,\r\n              success: function (res) {\r\n                if (res.confirm) {\r\n                  uni.switchTab({\r\n                    url: \"../device/device\",\r\n                  });\r\n                }\r\n              },\r\n            });\r\n          },\r\n        });\r\n      },\r\n    });\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {},\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n    // wx.closeBLEConnection({\r\n    //   deviceId: this.data.deviceId,\r\n    //   success: function(res) {\r\n    //     wx.switchTab({\r\n    //       url: '../device/device',\r\n    //     });\r\n    //   },\r\n    // })\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {},\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {},\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {},\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {},\r\n  methods: {\r\n    handle(e) {\r\n      this.setData({\r\n        val: e.target.dataset.money,\r\n        money_value: e.target.dataset.value,\r\n        tempid: e.target.dataset.id,\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 获取设备相对应的模板\r\n     */\r\n    getTemp: function (code) {\r\n      var that = this;\r\n      console.log(\"设备号===\" + code);\r\n      uni.request({\r\n        url: \"https://app.tengfuchong.com/applet/getTemps?code=\" + code,\r\n        method: \"POST\",\r\n        success: function (res) {\r\n          console.log(res.data);\r\n\r\n          if (res.data.length == 0) {\r\n            that.setData({\r\n              money_value: 2,\r\n              val: 2,\r\n            });\r\n          }\r\n\r\n          if (res.data.length == 1) {\r\n            that.setData({\r\n              items: res.data,\r\n              money_value: res.data[0].remark,\r\n              val: res.data[0].money,\r\n              tempid: res.data[0].id,\r\n            });\r\n          } else {\r\n            for (var index in res.data) {\r\n              console.log(index + \"=\" + res.data[index].name);\r\n              that.setData({\r\n                items: res.data,\r\n                money_value: res.data[1].remark,\r\n                val: res.data[1].money,\r\n                tempid: res.data[1].id,\r\n              });\r\n            }\r\n          }\r\n        },\r\n      });\r\n    },\r\n\r\n    Characteristics: function () {\r\n      var that = this; // console.log('this===' + that);\r\n\r\n      var device_characteristics = [];\r\n      var characteristics_uuid = {};\r\n      uni.getBLEDeviceCharacteristics({\r\n        deviceId: that.deviceId,\r\n        serviceId: that.serviceId,\r\n        success: function (res) {\r\n          var characteristics = res.characteristics; //获取到所有特征值\r\n\r\n          var characteristics_length = characteristics.length; //获取到特征值数组的长度\r\n          // console.log('获取到特征值', characteristics);\r\n          // console.log('获取到特征值数组长度', characteristics_length);\r\n\r\n          /* 遍历数组获取notycharacteristicsId */\r\n\r\n          for (var index = 0; index < characteristics_length; index++) {\r\n            var noty_characteristics_UUID = characteristics[index].uuid; //取出特征值里面的UUID\r\n\r\n            var characteristics_slice = noty_characteristics_UUID.slice(4, 8); //截取4到8位\r\n\r\n            /* 判断是否是我们需要的FEE1 */\r\n\r\n            if (\r\n              characteristics_slice == \"FFE1\" ||\r\n              characteristics_slice == \"ffe1\"\r\n            ) {\r\n              var index_uuid = index;\r\n              that.setData({\r\n                notycharacteristicsId: characteristics[index_uuid].uuid,\r\n                //需确定要的使能UUID\r\n                characteristicsId: characteristics[index_uuid].uuid, //暂时确定的写入UUID\r\n              });\r\n              /* 遍历获取characteristicsId */\r\n\r\n              for (var index = 0; index < characteristics_length; index++) {\r\n                var characteristics_UUID = characteristics[index].uuid; //取出特征值里面的UUID\r\n\r\n                var characteristics_slice = characteristics_UUID.slice(4, 8); //截取4到8位\r\n\r\n                /* 判断是否是我们需要的FEE2 */\r\n\r\n                if (\r\n                  characteristics_slice == \"FEE2\" ||\r\n                  characteristics_slice == \"fee2\"\r\n                ) {\r\n                  var index_uuid = index;\r\n                  that.setData({\r\n                    characteristicsId: characteristics[index_uuid].uuid, //确定的写入UUID\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          } // console.log('使能characteristicsId', that.data.notycharacteristicsId);\r\n\r\n          // console.log('写入characteristicsId', that.data.characteristicsId);\r\n\r\n          that.notycharacteristicsIdFun(); //使能事件\r\n        },\r\n      });\r\n    },\r\n\r\n    /* 使能函数 */\r\n    notycharacteristicsIdFun: function () {\r\n      var that = this;\r\n      var recv_value_ascii = \"\";\r\n      var string_value = \"\";\r\n      var recve_value = \"\";\r\n      uni.notifyBLECharacteristicValueChange({\r\n        deviceId: that.deviceId,\r\n        serviceId: that.serviceId,\r\n        characteristicId: that.notycharacteristicsId,\r\n        state: true,\r\n        success: function (res) {\r\n          // console.log('使能成功', res);\r\n\r\n          /* 设备返回值 */\r\n          uni.onBLECharacteristicValueChange(function (res) {\r\n            var length_hex = [];\r\n            var turn_back = \"\";\r\n            var turn_back_hex = \"\";\r\n            var result = res.value;\r\n            var hex = that.buf2hex(result); // console.log('返回的值', hex);\r\n            // console.log('设备返回来的值', hex);\r\n\r\n            var f_hex = hex;\r\n            var length_soy = f_hex.length / 2;\r\n            var length = Math.round(length_soy);\r\n\r\n            for (var i = 0; i < length; i++) {\r\n              var hex_spalit = f_hex.slice(0, 2);\r\n              length_hex.push(hex_spalit);\r\n              f_hex = f_hex.substring(2);\r\n            } // console.log('length_hex', length_hex);\r\n\r\n            for (var j = 0; j < length_hex.length; j++) {\r\n              var integar = length_hex[j]; //十六进制\r\n\r\n              recve_value = parseInt(integar, 16); //十进制\r\n              // console.log('recve_value', recve_value);\r\n\r\n              turn_back = turn_back + String.fromCharCode(recve_value);\r\n              turn_back_hex = turn_back_hex + integar; // console.log('turn_back', integar);\r\n            } // console.log('返回值hex' + turn_back_hex);\r\n\r\n            if (turn_back_hex == \"5504830100d2\") {\r\n              uni.hideLoading();\r\n              uni.showToast({\r\n                title: \"投币成功\",\r\n              });\r\n            } // console.log('最终转回来的值', turn_back);\r\n\r\n            var recv_number_1 = that.recv_number + turn_back.length;\r\n            var recv_number = Math.round(recv_number_1);\r\n            that.setData({\r\n              recv_number: recv_number,\r\n              recv_value: that.recv_value + turn_back,\r\n            });\r\n          });\r\n        },\r\n        fail: function (res) {\r\n          // console.log('使能失败', res);\r\n        },\r\n      });\r\n    },\r\n\r\n    Sendincoins: function () {\r\n      var that = this;\r\n      console.log(\"---发送money\" + that.money_value);\r\n      uni.openBluetoothAdapter({\r\n        success: function (res) {\r\n          var send1 = \"aa\";\r\n          var send2 = \"83\";\r\n          var send3 = \"04\";\r\n          var send4 = \"01\";\r\n          var send5 = \"0\" + that.port;\r\n          var send6 = that.money_value + \"\" || \"02\";\r\n          var valSize = send6.length;\r\n\r\n          if (valSize < 2 && valSize > 0) {\r\n            send6 = \"0\" + send6;\r\n          }\r\n\r\n          var send7 = send2 ^ send3 ^ send4 ^ send5 ^ send6; // console.log(\"拼凑值===\" + send1 + '' + send2 + '' + send3 + '' + send4 + '' + send5 + '' + send6 + '' + send7)\r\n          // var value_initial = 'aa830401010186';\r\n\r\n          var value_initial =\r\n            send1 +\r\n            \"\" +\r\n            send2 +\r\n            \"\" +\r\n            send3 +\r\n            \"\" +\r\n            send4 +\r\n            \"\" +\r\n            send5 +\r\n            \"\" +\r\n            send6 +\r\n            \"\" +\r\n            send7;\r\n          /* 判断字节是否超过20字节 */\r\n\r\n          if (value_initial.length > 20) {\r\n            //当字节超过20的时候，采用分段发送\r\n            if (that.send_string == true) {\r\n              //选择16进制发送时\r\n              var value_initial_exceed = value_initial; //将输入框的值取过来，方便循环\r\n\r\n              var value_initial_average = Math.ceil(\r\n                value_initial_exceed.length / 20\r\n              ); //将value_initial_exceed的长度除以20，余数再向上取一，确定循环几次\r\n              // console.log('需要循环的次数', value_initial_average);\r\n\r\n              for (var i = 0; i < value_initial_average; i++) {\r\n                if (value_initial_exceed.length > 20) {\r\n                  var value_initial_send = value_initial_exceed.slice(0, 20); //截取前20个字节\r\n                  // console.log('截取到的值', value_initial_send);\r\n\r\n                  value_initial_exceed = value_initial_exceed.substring(20); //value_initial_exceed替换为取掉前20字节后的数据\r\n\r\n                  write_array.push(value_initial_send); //将所有截取的值放在一个数组\r\n                } else {\r\n                  write_array.push(value_initial_exceed);\r\n                }\r\n              } // console.log('write_array数组', write_array);\r\n\r\n              write_array.map(function (val, index) {\r\n                setTimeout(function () {\r\n                  var value_set = val; // console.log('value_set', value_set);\r\n\r\n                  var write_function = that.write(value_set); //调用数据发送函数\r\n                }, index * 100);\r\n              });\r\n              /* 发送的值的字节 */\r\n\r\n              var send_number_1 = that.send_number + value_initial.length / 2;\r\n              var send_number = Math.floor(send_number_1);\r\n              that.setData({\r\n                send_number: send_number,\r\n              });\r\n            } else {\r\n              //选择Ascii码发送\r\n\r\n              /* 当选择以Ascii字符发送的时候 */\r\n              var value_split = value_initial.split(\"\"); //将字符一个一个分开\r\n              // console.log('value_split', value_split);\r\n\r\n              for (var i = 0; i < value_split.length; i++) {\r\n                value_ascii =\r\n                  value_ascii + value_split[i].charCodeAt().toString(16); //转为Ascii字符后连接起\r\n              }\r\n\r\n              var Ascii_value = value_ascii; // console.log('转为Ascii码值', Ascii_value);\r\n              // console.log('Ascii_value的长度', Ascii_value.length)\r\n\r\n              var Ascii_send_time = Math.ceil(Ascii_value.length / 20); // console.log('Ascii发送的次数', Ascii_send_time);\r\n\r\n              for (var i = 0; i < Ascii_send_time; i++) {\r\n                if (Ascii_value.length > 20) {\r\n                  var value = Ascii_value.slice(0, 20); // console.log('截取到的值', value);\r\n\r\n                  Ascii_value = Ascii_value.substring(20); // console.log('此时剩下的Ascii_value', Ascii_value);\r\n\r\n                  write_array.push(value); //放在数组里面\r\n                } else {\r\n                  var value = Ascii_value;\r\n                  write_array.push(Ascii_value); //放在数组里面\r\n                }\r\n              } // console.log('数组write_array', write_array);\r\n\r\n              write_array.map(function (val, index) {\r\n                setTimeout(function () {\r\n                  var value_set = val; // console.log('value_set', value_set);\r\n\r\n                  var write_function = that.write(value_set); //调用数据发送函数\r\n                }, index * 100);\r\n              });\r\n              /* 发送的值的字节 */\r\n\r\n              var send_number_1 = that.send_number + value_initial.length;\r\n              var send_number = Math.round(send_number_1);\r\n              that.setData({\r\n                send_number: send_number,\r\n              });\r\n            }\r\n          } else {\r\n            /* 当选择了以Hex十六进制发送的时候 */\r\n            var value = value_initial;\r\n            var write_function = that.write(value); //调用数据发送函数\r\n\r\n            /* 成功发送的值的字节 */\r\n\r\n            var send_number_1 = that.send_number + value_initial.length / 2;\r\n            var send_number = Math.floor(send_number_1);\r\n            that.setData({\r\n              send_number: send_number,\r\n            });\r\n          }\r\n        },\r\n        fail: function (res) {\r\n          uni.showModal({\r\n            content: \"请开启手机蓝牙后再试\",\r\n            success: function () {\r\n              uni.switchTab({\r\n                url: \"../device/device\",\r\n                success: function () {\r\n                  // console.log(\"success\");\r\n                },\r\n                fail: function (res) {\r\n                  // console.log(\"fail\" + res);\r\n                },\r\n              });\r\n            },\r\n          });\r\n        },\r\n      });\r\n    },\r\n\r\n    write: function (str) {\r\n      var that = this;\r\n      var value = str; // console.log('value', value);\r\n\r\n      var valSize = value.length;\r\n\r\n      if (valSize < 2 && valSize > 0) {\r\n        value = \"0\" + value;\r\n      }\r\n\r\n      console.log(\"---\" + value);\r\n      /* 将数值转为ArrayBuffer类型数据 */\r\n\r\n      var typedArray = new Uint8Array(\r\n        (value + \"\\r\\n\").match(/[\\da-f]{2}/gi).map(function (h) {\r\n          return parseInt(h, 16);\r\n        })\r\n      );\r\n      var buffer = typedArray.buffer;\r\n      uni.writeBLECharacteristicValue({\r\n        deviceId: that.deviceId,\r\n        serviceId: that.serviceId,\r\n        characteristicId: that.characteristicsId,\r\n        value: buffer,\r\n        success: function (res) {\r\n          console.log(\"数据发送成功\", res);\r\n          return true;\r\n        },\r\n        fail: function (res) {\r\n          // console.log('调用失败', res);\r\n\r\n          /* 调用失败时，再次调用 */\r\n          uni.writeBLECharacteristicValue({\r\n            deviceId: that.deviceId,\r\n            serviceId: that.serviceId,\r\n            characteristicId: that.characteristicsId,\r\n            value: buffer,\r\n            success: function (res) {\r\n              // console.log('第2次数据发送成功', res);\r\n              return true;\r\n            },\r\n            fail: function (res) {\r\n              console.log(\"第2次调用失败\", res);\r\n              /* 调用失败时，再次调用 */\r\n\r\n              uni.writeBLECharacteristicValue({\r\n                deviceId: that.deviceId,\r\n                serviceId: that.serviceId,\r\n                characteristicId: that.characteristicsId,\r\n                value: buffer,\r\n                success: function (res) {\r\n                  return true; // console.log('第3次数据发送成功', res);\r\n                },\r\n                fail: function (res) {\r\n                  // wx.showToast({\r\n                  //   title: '设备不在线或距离较远',\r\n                  //   success: function() {\r\n                  //     wx.switchTab({\r\n                  //       url: '../device/device',\r\n                  //     });\r\n                  //   }\r\n                  // })\r\n                  return false;\r\n                  uni.showModal({\r\n                    title: \"提示\",\r\n                    content: \"设备不在线或距离较远\",\r\n                    showCancel: false,\r\n                    success: function (res) {\r\n                      if (res.confirm) {\r\n                        uni.switchTab({\r\n                          url: \"../device/device\",\r\n                        });\r\n                      }\r\n                    },\r\n                  }); // console.log('第3次调用失败', res);\r\n                },\r\n              });\r\n            },\r\n          });\r\n        },\r\n      });\r\n    },\r\n\r\n    Payincoins: function () {\r\n      var that = this;\r\n      that.setData({\r\n        disabled: true,\r\n      });\r\n      uni.connectSocket({\r\n        url: \"wss://app.tengfuchong.com/websocket\",\r\n        success: function (res) {\r\n          console.log(\"socket连接打开===\" + JSON.stringify(res));\r\n        },\r\n      });\r\n      uni.onSocketMessage(function (res) {\r\n        var status = res.data;\r\n\r\n        if (status == 1) {\r\n          that.senddata();\r\n          uni.closeSocket();\r\n        }\r\n      });\r\n      uni.openBluetoothAdapter({\r\n        success: function (res) {\r\n          var openid = that.openid;\r\n          console.log(openid);\r\n          uni.request({\r\n            url: \"https://app.tengfuchong.com/testpay/pay\",\r\n            data: {\r\n              openId: openid,\r\n              tempid: that.tempid,\r\n              code: that.deviceName,\r\n              port: that.port,\r\n            },\r\n            header: {\r\n              \"content-type\": \"application/x-www-form-urlencoded\", // 默认值\r\n            },\r\n            method: \"POST\",\r\n            success: function (res) {\r\n              that.doWxPay(res.data);\r\n            },\r\n            fail: function (err) {\r\n              uni.showToast({\r\n                icon: \"none\",\r\n                title: \"服务器异常，清稍候再试\",\r\n              });\r\n            },\r\n          });\r\n        },\r\n        fail: function () {\r\n          uni.showModal({\r\n            content: \"请开启手机蓝牙后再试\",\r\n            success: function () {\r\n              uni.switchTab({\r\n                url: \"../device/device\",\r\n                success: function () {},\r\n                fail: function (res) {},\r\n              });\r\n            },\r\n          });\r\n        },\r\n      });\r\n    },\r\n\r\n    doWxPay(param) {\r\n      var that = this; //小程序发起微信支付\r\n\r\n      uni.requestPayment({\r\n        timeStamp: param.timeStamp,\r\n        //记住，这边的timeStamp一定要是字符串类型的，不然会报错\r\n        nonceStr: param.nonceStr,\r\n        package: param.packagess,\r\n        signType: \"MD5\",\r\n        paySign: param.paySign,\r\n        success: function (event) {\r\n          // success\r\n          uni.showToast({\r\n            title: \"支付成功\",\r\n            icon: \"success\",\r\n            duration: 2000,\r\n            success: function () {\r\n              uni.showToast({\r\n                title: \"支付成功\",\r\n                success: function (res) {\r\n                  uni.closeBLEConnection({\r\n                    deviceId: that.deviceId,\r\n                    success: function (res) {\r\n                      uni.switchTab({\r\n                        url: \"../device/device\",\r\n                      });\r\n                    },\r\n                  });\r\n                },\r\n              });\r\n            },\r\n          });\r\n        },\r\n        fail: function (res) {\r\n          uni.closeSocket();\r\n          uni.showToast({\r\n            title: \"支付取消\",\r\n          });\r\n          that.setData({\r\n            disabled: false,\r\n          });\r\n        },\r\n        complete: function () {},\r\n      });\r\n    },\r\n\r\n    checkBluetoothIfOpen: function () {\r\n      uni.openBluetoothAdapter({\r\n        success: function (res) {},\r\n        fail: function (res) {\r\n          uni.showModal({\r\n            content: \"请开启手机蓝牙后再试\",\r\n          });\r\n          uni.navigateTo({\r\n            url: \"../device/device\",\r\n          });\r\n        },\r\n      });\r\n    },\r\n\r\n    senddata() {\r\n      var that = this;\r\n      var send1 = \"aa\";\r\n      var send2 = \"83\";\r\n      var send3 = \"04\";\r\n      var send4 = \"01\";\r\n      var send5 = \"0\" + that.port;\r\n      var send6 = that.money_value + \"\" || \"02\";\r\n      var valSize = send6.length;\r\n\r\n      if (valSize < 2 && valSize > 0) {\r\n        send6 = \"0\" + send6;\r\n      }\r\n\r\n      var send7 = send2 ^ send3 ^ send4 ^ send5 ^ send6;\r\n      var value_initial =\r\n        send1 +\r\n        \"\" +\r\n        send2 +\r\n        \"\" +\r\n        send3 +\r\n        \"\" +\r\n        send4 +\r\n        \"\" +\r\n        send5 +\r\n        \"\" +\r\n        send6 +\r\n        \"\" +\r\n        send7;\r\n      /* 判断字节是否超过20字节 */\r\n\r\n      if (value_initial.length > 20) {\r\n        //当字节超过20的时候，采用分段发送\r\n        if (that.send_string == true) {\r\n          //选择16进制发送时\r\n          var value_initial_exceed = value_initial; //将输入框的值取过来，方便循环\r\n\r\n          var value_initial_average = Math.ceil(\r\n            value_initial_exceed.length / 20\r\n          ); //将value_initial_exceed的长度除以20，余数再向上取一，确定循环几次\r\n          // console.log('需要循环的次数', value_initial_average);\r\n\r\n          for (var i = 0; i < value_initial_average; i++) {\r\n            if (value_initial_exceed.length > 20) {\r\n              var value_initial_send = value_initial_exceed.slice(0, 20); //截取前20个字节\r\n              // console.log('截取到的值', value_initial_send);\r\n\r\n              value_initial_exceed = value_initial_exceed.substring(20); //value_initial_exceed替换为取掉前20字节后的数据\r\n\r\n              write_array.push(value_initial_send); //将所有截取的值放在一个数组\r\n            } else {\r\n              write_array.push(value_initial_exceed);\r\n            }\r\n          } // console.log('write_array数组', write_array);\r\n\r\n          write_array.map(function (val, index) {\r\n            setTimeout(function () {\r\n              var value_set = val; // console.log('value_set', value_set);\r\n\r\n              var write_function = that.write(value_set); //调用数据发送函数\r\n            }, index * 100);\r\n          });\r\n          /* 发送的值的字节 */\r\n\r\n          var send_number_1 = that.send_number + value_initial.length / 2;\r\n          var send_number = Math.floor(send_number_1);\r\n          that.setData({\r\n            send_number: send_number,\r\n          });\r\n        } else {\r\n          //选择Ascii码发送\r\n\r\n          /* 当选择以Ascii字符发送的时候 */\r\n          var value_split = value_initial.split(\"\"); //将字符一个一个分开\r\n          // console.log('value_split', value_split);\r\n\r\n          for (var i = 0; i < value_split.length; i++) {\r\n            value_ascii =\r\n              value_ascii + value_split[i].charCodeAt().toString(16); //转为Ascii字符后连接起\r\n          }\r\n\r\n          var Ascii_value = value_ascii; // console.log('转为Ascii码值', Ascii_value);\r\n          // console.log('Ascii_value的长度', Ascii_value.length)\r\n\r\n          var Ascii_send_time = Math.ceil(Ascii_value.length / 20); // console.log('Ascii发送的次数', Ascii_send_time);\r\n\r\n          for (var i = 0; i < Ascii_send_time; i++) {\r\n            if (Ascii_value.length > 20) {\r\n              var value = Ascii_value.slice(0, 20); // console.log('截取到的值', value);\r\n\r\n              Ascii_value = Ascii_value.substring(20); // console.log('此时剩下的Ascii_value', Ascii_value);\r\n\r\n              write_array.push(value); //放在数组里面\r\n            } else {\r\n              var value = Ascii_value;\r\n              write_array.push(Ascii_value); //放在数组里面\r\n            }\r\n          } // console.log('数组write_array', write_array);\r\n\r\n          write_array.map(function (val, index) {\r\n            setTimeout(function () {\r\n              var value_set = val; // console.log('value_set', value_set);\r\n\r\n              var write_function = that.write(value_set); //调用数据发送函数\r\n            }, index * 100);\r\n          });\r\n          /* 发送的值的字节 */\r\n\r\n          var send_number_1 = that.send_number + value_initial.length;\r\n          var send_number = Math.round(send_number_1);\r\n          that.setData({\r\n            send_number: send_number,\r\n          });\r\n        }\r\n      } else {\r\n        /* 当选择了以Hex十六进制发送的时候 */\r\n        var value = value_initial;\r\n        var write_function = that.write(value); //调用数据发送函数\r\n\r\n        /* 成功发送的值的字节 */\r\n\r\n        var send_number_1 = that.send_number + value_initial.length / 2;\r\n        var send_number = Math.floor(send_number_1);\r\n        that.setData({\r\n          send_number: send_number,\r\n        });\r\n      }\r\n    },\r\n\r\n    buf2hex: function (buffer) {\r\n      // buffer is an ArrayBuffer\r\n      return Array.prototype.map\r\n        .call(new Uint8Array(buffer), (x) => (\"00\" + x.toString(16)).slice(-2))\r\n        .join(\"\");\r\n    },\r\n\r\n    base64_encode: function (str) {\r\n      var c1;\r\n      var c2;\r\n      var c3;\r\n      // 编码，配合encodeURIComponent使用\r\n      var base64EncodeChars =\r\n        \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\n      var i = 0;\r\n      var len = str.length;\r\n      var strin = \"\";\r\n      while (i < len) {\r\n        c1 = str.charCodeAt(i++) & 255;\r\n\r\n        if (i == len) {\r\n          strin += base64EncodeChars.charAt(c1 >> 2);\r\n          strin += base64EncodeChars.charAt((c1 & 3) << 4);\r\n          strin += \"==\";\r\n          break;\r\n        }\r\n\r\n        c2 = str.charCodeAt(i++);\r\n\r\n        if (i == len) {\r\n          strin += base64EncodeChars.charAt(c1 >> 2);\r\n          strin += base64EncodeChars.charAt(\r\n            ((c1 & 3) << 4) | ((c2 & 240) >> 4)\r\n          );\r\n          strin += base64EncodeChars.charAt((c2 & 15) << 2);\r\n          strin += \"=\";\r\n          break;\r\n        }\r\n\r\n        c3 = str.charCodeAt(i++);\r\n        strin += base64EncodeChars.charAt(c1 >> 2);\r\n        strin += base64EncodeChars.charAt(((c1 & 3) << 4) | ((c2 & 240) >> 4));\r\n        strin += base64EncodeChars.charAt(((c2 & 15) << 2) | ((c3 & 192) >> 6));\r\n        strin += base64EncodeChars.charAt(c3 & 63);\r\n      }\r\n\r\n      return strin;\r\n    },\r\n\r\n    callPhone: function () {\r\n      var that = this;\r\n      console.log(that.phonenum);\r\n      uni.makePhoneCall({\r\n        phoneNumber: that.phonenum,\r\n        success: function (res_makephone) {\r\n          console.log(\"呼叫电话返回：\", res_makephone);\r\n        },\r\n      });\r\n    },\r\n\r\n    Backhome: function () {\r\n      var that = this;\r\n      uni.closeBLEConnection({\r\n        deviceId: that.deviceId,\r\n        success: function (res) {\r\n          uni.switchTab({\r\n            url: \"../device/device\",\r\n          });\r\n        },\r\n      });\r\n    },\r\n\r\n    inadver: function () {\r\n      uni.navigateTo({\r\n        url: \"../ad/ad\",\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.container {\r\n  padding: 0 20rpx;\r\n  font-size: 12px;\r\n}\r\n.addincoins {\r\n  margin-top: 5px;\r\n  width: 100%;\r\n  background-color: #44b549;\r\n  color: white;\r\n}\r\n.addincoins .ad navigator image {\r\n  width: 100%;\r\n  height: 300rpx;\r\n}\r\n.connect_device_name {\r\n  font-size: 14px;\r\n  margin: 15rpx 0;\r\n}\r\n.choosemoney .title {\r\n  font-size: 14px;\r\n  margin: 30rpx 0 10rpx;\r\n}\r\n.choosemoney .btn {\r\n  border: 1px solid #ccc !important;\r\n  height: 80rpx;\r\n  border-radius: 12rpx;\r\n  text-align: center;\r\n  line-height: 70rpx;\r\n  border-bottom: none !important;\r\n  font-size: 12px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.choosemoney .tr:last-child .btn {\r\n  border-bottom: 1px solid #ccc !important;\r\n  margin-bottom: 25rpx;\r\n}\r\n\r\n.addincoins,\r\n.payincoins {\r\n  background-color: #1aad19;\r\n  border-radius: 6rpx;\r\n  height: 75rpx;\r\n  line-height: 75rpx;\r\n  margin-bottom: 40rpx;\r\n  font-size: 12px;\r\n  color: #fff;\r\n}\r\n.addincoins[disabled],\r\n.payincoins[disabled] {\r\n  background-color: #ccc !important;\r\n}\r\n\r\n.payincoins {\r\n  margin-top: 5px;\r\n  width: 100%;\r\n  background-color: #1aad19;\r\n  color: white;\r\n}\r\n.money {\r\n  width: 100%;\r\n}\r\n.goIndex {\r\n  margin-bottom: 50rpx;\r\n}\r\n#connect_phone {\r\n  font-size: 13px;\r\n}\r\n#connect_phone text {\r\n  color: #3b7fb9;\r\n}\r\n.choosemoney {\r\n  width: 100%;\r\n  white-space: normal;\r\n  overflow: hidden;\r\n}\r\n.btn {\r\n  border: 1px solid #ccc !important;\r\n  width: 100%;\r\n  height: 80rpx;\r\n  border: 1rpx solid #ccc;\r\n  border-radius: 15rpx;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.active {\r\n  border: 1rpx solid #1aad19;\r\n  background-color: #1aad19;\r\n  color: #ffffff;\r\n}\r\n</style>\r\n","import mod from \"-!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./incoins.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./incoins.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1670583202477\n      var cssReload = require(\"D:/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}