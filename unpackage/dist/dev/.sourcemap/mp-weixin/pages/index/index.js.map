{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/Acer/Desktop/hd/hduser-applet/pages/index/index.vue?e059","webpack:///C:/Users/Acer/Desktop/hd/hduser-applet/pages/index/index.vue?1ba9","webpack:///C:/Users/Acer/Desktop/hd/hduser-applet/pages/index/index.vue?367f","uni-app:///pages/index/index.vue","webpack:///C:/Users/Acer/Desktop/hd/hduser-applet/pages/index/index.vue?dc52","webpack:///C:/Users/Acer/Desktop/hd/hduser-applet/pages/index/index.vue?dd26"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,6F,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACqL;AACrL,gBAAgB,sLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,sQAEN;AACP,KAAK;AACL;AACA,aAAa,4QAEN;AACP,KAAK;AACL;AACA,aAAa,sNAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3CA;AAAA;AAAA;AAAA;AAA4rB,CAAgB,4pBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACoDhtB,iE;AACA,kB;AACA;AACA,MADA,kBACA;AACA;AACA;AACA;AACA,qBADA;AAEA,gBAFA;AAGA,eAHA,EADA;;AAMA;AACA,oBADA;AAEA,gBAFA;AAGA,eAHA,EANA,CADA;;;AAaA,gBAbA,EAaA;AACA,iBAdA,EAcA;AACA,cAfA,EAeA;AACA,eAhBA,EAgBA;AACA,iCAjBA,EAiBA;AACA,iCAlBA;AAmBA,oCAnBA,EAmBA;AACA,oCApBA;AAqBA,iBArBA,EAqBA;AACA,wBAtBA,EAsBA;AACA,iBAvBA,EAuBA;AACA,8BAxBA,CAwBA;AAxBA;AA0BA,GA5BA;AA6BA,QA7BA,oBA6BA;AACA;AACA,GA/BA;AAgCA,SAhCA,qBAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OARA;AASA,UATA,gBASA,GATA,EASA;AACA;AACA,OAXA;;AAaA,GApDA;AAqDA;AACA;AACA;AACA,aADA,mBACA,CADA,EACA;AACA;AACA,OAHA,EAFA;;AAOA;AACA,aADA,qBACA;AACA;AACA,yBADA;AAEA,wBAFA;AAGA,sBAHA;AAIA,qBAJA;AAKA,oBALA;;AAOA;AACA,OAVA,EAPA,EArDA;;;AAyEA;AACA;;;;;;AAMA,iBAPA,yBAOA,SAPA,EAOA,QAPA,EAOA,UAPA,EAOA,SAPA,EAOA,IAPA,EAOA;AACA;AACA,wCADA;AAEA,sCAFA;AAGA,0CAHA;AAIA,wCAJA;AAKA,8BALA;AAMA,iDANA,GADA,+CACA,IADA,yBACA,IADA,CACA,OADA,yBACA,OADA,CACA,MADA,yBACA,MADA;;AASA;AACA;AACA;AACA,iBAHA,MAGA;AACA;AACA,kCADA;;AAGA,iBAhBA;AAiBA,KAxBA;AAyBA,iBAzBA,yBAyBA,KAzBA,EAyBA;AACA;AACA,KA3BA;AA4BA;AACA,WA7BA,mBA6BA,IA7BA,EA6BA;AACA;AACA,WADA,CACA,QADA,KACA,SADA,oBACA,QADA,oBACA,SADA,GACA,GADA,CACA,SADA;AAEA;AACA;AACA;AACA,8BADA;AAEA,gCAFA;AAGA,wDAHA;AAIA,iCAJA;AAKA,sCALA;AAMA,uCANA;AAOA,8BAPA,CAOA;AAPA;AASA;AACA;AACA,4BADA;AAEA,8BAFA;AAGA,+CAHA;AAIA,+BAJA;AAKA,gCALA;AAMA,iCANA;AAOA,4BAPA,CAOA;AAPA;AASA,OAvBA;AAwBA,KAtDA;AAuDA;AACA,cAxDA,wBAwDA;AACA;AACA;AACA,6BADA;AAEA,mBAFA,CAEA;AAFA;AAIA,KA9DA;AA+DA;AACA,aAhEA,2BAgEA;AACA;AACA;AACA;AACA,OAFA,EAEA,GAFA;AAGA;AACA;AACA;AACA;AACA,KAzEA;;AA2EA;AACA,mBA5EA,2BA4EA,QA5EA,EA4EA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA,OAZA;AAaA,KA3FA;AA4FA;AACA,OA7FA,sBA6FA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA,KA7GA;AA8GA;AACA,cA/GA,sBA+GA,CA/GA,EA+GA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA,KAzHA;AA0HA,WA1HA,mBA0HA,MA1HA,EA0HA;AACA;AACA,KA5HA;AA6HA;AACA,gBA9HA,+BA8HA;AACA;AACA;AACA,4DADA,CACA;AACA;AACA;AACA,yBADA;AAEA,wBAFA;AAGA,sBAHA;AAIA,qBAJA;AAKA,oBALA;;AAOA;;AAEA,KA5IA;AA6IA;AACA,gBA9IA,0BA8IA;AACA;AACA;AACA;AACA,qBADA,EACA;AACA;AACA;AACA;AACA;AACA,8BADA;AAEA,gCAFA;AAGA,qBAHA;AAIA,qCAJA;AAKA,kCALA;AAMA;AACA;AACA,aARA;AASA;AACA;AACA,aAXA;;AAaA,SAlBA;;AAoBA,KArKA;AAsKA,cAtKA,sBAsKA,IAtKA,EAsKA;AACA;AACA,KAxKA,EAzEA,E;;;;;;;;;;;;;ACtDA;AAAA;AAAA;AAAA;AAAu0C,CAAgB,usCAAG,EAAC,C;;;;;;;;;;;ACA31C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57280228\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&scoped=true&\"","var components\ntry {\n  components = {\n    mSubsection: function() {\n      return import(\n        /* webpackChunkName: \"components/m-subsection/m-subsection\" */ \"@/components/m-subsection/m-subsection.vue\"\n      )\n    },\n    mDeviceInfo: function() {\n      return import(\n        /* webpackChunkName: \"components/m-device-info/m-device-info\" */ \"@/components/m-device-info/m-device-info.vue\"\n      )\n    },\n    mDeviceList: function() {\n      return import(\n        /* webpackChunkName: \"components/m-device-list/m-device-list\" */ \"@/components/m-device-list/m-device-list.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"page-body d-flex flex-column position-relative\">\r\n\t\t<view class=\"d-flex align-items-center w-100 bg-white header\">\r\n\t\t\t<view class=\"flex-1\">\r\n\t\t\t\t<m-subsection :list=\"tabList\" :currentIndex=\"current\" @change=\"sectionChange\"></m-subsection>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"padding-x-2\">\r\n\t\t\t\t<view class=\"d-flex align-items-center\" v-if=\"mode === 'list'\" @click=\"toggleMode('map')\">\r\n\t\t\t\t\t<text class=\"iconfont icon-ditu text-666 margin-right-1 text-primary\"></text>\r\n\t\t\t\t\t<text class=\"text-666 text-size-md text-primary\" >地图</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"d-flex align-items-center\" v-else @click=\"toggleMode('list')\">\r\n\t\t\t\t\t<text class=\"iconfont icon-liebiao text-666 margin-right-1 text-primary\"></text>\r\n\t\t\t\t\t<text class=\"text-666 text-size-md text-primary\" >列表</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t<view class=\"map-section page-section page-section-gap flex-1 position-relative overflow-hidden\" v-show=\"mode === 'map'\">\r\n\t\t\t<map\r\n\t\t\t\tid=\"map\"\r\n\t\t\t\tstyle=\"width: 100%; height:100%;\"\r\n\t\t\t\t:longitude=\"longitude\"\r\n\t\t\t\t:latitude=\"latitude\"\r\n\t\t\t\t:scale=\"scale\"\r\n\t\t\t\t:show-location=\"true\"\r\n\t\t\t\t:enable-rotate=\"true\"\r\n\t\t\t\t@markertap=\"markertap\"\r\n\t\t\t\t@tap=\"tap\"\r\n\t\t\t\t@updated=\"updated\"\r\n\t\t\t\t@regionchange=\"regionchange\"\r\n\t\t\t>\r\n\t\t\t\t  <!-- <cover-view class=\"cover-view\" @click=\"controltap\">\r\n\t\t\t\t\t<cover-image class=\"station\" src=\"https://linli-oss.vecommunity.com/xchx/icon/position.jpg\"></cover-image>\r\n\t\t\t\t  </cover-view> -->\r\n\t\t\t</map>\r\n\t\t\t<!-- 空间 -->\r\n\t\t\t<view class=\"contral-position\" @click=\"controltap\">\r\n\t\t\t\t<image src=\"https://linli-oss.vecommunity.com/xchx/icon/position.jpg\" mode=\"\"></image>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<m-device-info :coverView=\"coverView\" v-if=\"selectDevice\" :info=\"selectDevice\" />\r\n\t\t</view>\r\n\t\t<view class=\"list-section page-section page-section-gap flex-1 position-relative overflow-hidden\" v-if=\"mode === 'list'\">\r\n\t\t\t<m-device-list :list=\"list\"/>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { getDevicesByPoint } from '@/api/home/index.js'\r\n\tconst baseSize = 30\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttabList: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '两轮电瓶车',\r\n\t\t\t\t\t\twidth: 0,\r\n\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '电动汽车',\r\n\t\t\t\t\t\twidth: 0,\r\n\t\t\t\t\t\tleft: 0\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tcurrent: 0, // 当前设备类型 0 两轮电动车 1 电动汽车\r\n\t\t\t\tmarkers: [], // 地图标点数据\r\n\t\t\t\tlist: [], // 获取到的设备信息\r\n\t\t\t\tscale: 16, // 苏方级别\r\n\t\t\t\tlongitude: 116.397228240966, // 目前人处于的位置\r\n\t\t\t\tlatitude: 39.90960456049752,\r\n\t\t\t\tmapLongitude: 116.397228240966, // 地图中心所处位置\r\n\t\t\t\tmapLatitude: 39.90960456049752,\r\n\t\t\t\tmpCtx: null, // 地图实例\r\n\t\t\t\tselectDevice: null, // 选择的设备信息\r\n\t\t\t\tmode: 'map', // 当前模式 map / list\r\n\t\t\t\tisNowSelectDevice: false, // 是否正在选中Device事件，选中后200ms关闭\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad () {           \r\n\t\t\t// this.getDeviceList(this.longitude, this.latitude)\r\n\t\t},\r\n\t\tmounted () {\r\n\t\t\tthis.mpCtx = uni.createMapContext('map', this)\r\n\t\t\t// this.mpCtx.initMarkerCluster({\r\n\t\t\t// \tenableDefaultStyle: true,\r\n\t\t\t// \tzoomOnClick: true,\r\n\t\t\t// \tgridSize: 50\r\n\t\t\t// })\r\n\t\t\tuni.getLocation({\r\n\t\t\t\ttype: 'wgs84',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tthis.longitude = res.longitude\r\n\t\t\t\t\tthis.latitude = res.latitude\r\n\t\t\t\t\tconsole.log('当前位置的经度：' + res.longitude);\r\n\t\t\t\t\tconsole.log('当前位置的纬度：' + res.latitude);\r\n\t\t\t\t\tthis.mpCtx.moveToLocation()\r\n\t\t\t\t},\r\n\t\t\t\tfail (res) {\r\n\t\t\t\t\tconsole.log('fail', res)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\t// 监听地图markers的改变，阿静覆盖物重新渲染\r\n\t\t\tmarkers: {\r\n\t\t\t\thandler (v) {\r\n\t\t\t\t\tthis.setMarkers()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcurrent: {\r\n\t\t\t\thandler () {\r\n\t\t\t\t\tthis.getDeviceList(\r\n\t\t\t\t\t\tthis.mapLongitude,\r\n\t\t\t\t\t\tthis.mapLatitude,\r\n\t\t\t\t\t\tthis.longitude,\r\n\t\t\t\t\t\tthis.latitude,\r\n\t\t\t\t\t\tthis.current\r\n\t\t\t\t\t)\r\n\t\t\t\t\tthis.selectDevice = null\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/** 获取设备信息通过经纬度\r\n\t\t\t * @param {Object} longitude 搜索设备的经度\r\n\t\t\t * @param {Object} latitude 搜索设备的纬度\r\n\t\t\t * @param {Object} cLongitude 人的经度 （目的是计算当前位置与设备位置之间的距离）\r\n\t\t\t * @param {Object} cLatitude 人的纬度 （目的是计算当前位置与设备位置之间的距离）\r\n\t\t\t */\r\n\t\t\tasync getDeviceList (longitude, latitude, cLongitude, cLatitude, type) {\r\n\t\t\t\tconst { code, message, result } = await getDevicesByPoint({\r\n\t\t\t\t\tlongitude,\r\n\t\t\t\t\tlatitude,\r\n\t\t\t\t\tcLongitude,\r\n\t\t\t\t\tcLatitude,\r\n\t\t\t\t\ttype,\r\n\t\t\t\t\trange: type === 0 ? 50 : 5000\r\n\t\t\t\t})\r\n\t\t\t\tif (code === 200) {\r\n\t\t\t\t\tthis.list = result\r\n\t\t\t\t\tthis.markers = this.fmtData(result)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: message\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsectionChange (index) {\r\n\t\t\t\tthis.current = index\r\n\t\t\t},\r\n\t\t\t// 格式化小区的数据\r\n\t\t\tfmtData (json) {\r\n\t\t\t\treturn json.map(one => {\r\n\t\t\t\t\tconst { geoCoord: [longitude, latitude], deviceNum } = one\r\n\t\t\t\t\tif (this.selectDevice && Number(this.selectDevice.deviceNum) === Number(deviceNum)) {\r\n\t\t\t\t\t\tconsole.log('yyyyyyyyyyyyyyy', deviceNum, Number(deviceNum))\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tlatitude,\r\n\t\t\t\t\t\t\tlongitude,\r\n\t\t\t\t\t\t\ticonPath: '/static/images/marker_active.png',\r\n\t\t\t\t\t\t\tid: Number(deviceNum),\r\n\t\t\t\t\t\t\twidth: (baseSize + 6) + 'px',\r\n\t\t\t\t\t\t\theight: baseSize + 6 + 'px',\r\n\t\t\t\t\t\t\tjoinCluster: false // 参与点聚合\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tlatitude,\r\n\t\t\t\t\t\tlongitude,\r\n\t\t\t\t\t\ticonPath: '/static/images/marker.png',\r\n\t\t\t\t\t\tid: Number(deviceNum),\r\n\t\t\t\t\t\twidth: baseSize + 'px',\r\n\t\t\t\t\t\theight: baseSize + 'px',\r\n\t\t\t\t\t\tjoinCluster: false // 参与点聚合\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 更新marks\r\n\t\t\tsetMarkers () {\r\n\t\t\t\t// 新的markers给添加上去\r\n\t\t\t\tthis.mpCtx.addMarkers({\r\n\t\t\t\t\tmarkers: this.markers,\r\n\t\t\t\t\tclear: true // 先清空地图上的点\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 点击地图标点\r\n\t\t\tmarkertap ({ markerId }) {\r\n\t\t\t\tthis.isNowSelectDevice = true\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.isNowSelectDevice = false\r\n\t\t\t\t}, 200)\r\n\t\t\t\t// 筛选出符合条件的设备\r\n\t\t\t\tthis.selectDevice = this.list.find(item => Number.parseInt(item.deviceNum) === markerId) \r\n\t\t\t\t// 选中的marker点放大，其他的marker点缩小\r\n\t\t\t\tthis.selectMarkerFun(markerId)\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 选中的marker点放大，其他的marker点缩小\r\n\t\t\tselectMarkerFun (markerId) {\r\n\t\t\t\t// 点击的标点放大，其他的标点缩小\r\n\t\t\t\tthis.markers = this.markers.map(marker => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (markerId === marker.id) {\r\n\t\t\t\t\t\tmarker.width = (baseSize + 6) + 'px'\r\n\t\t\t\t\t\tmarker.height = (baseSize + 6) + 'px'\r\n\t\t\t\t\t\tmarker.iconPath = '/static/images/marker_active.png'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmarker.width = baseSize + 'px'\r\n\t\t\t\t\t\tmarker.height = baseSize + 'px'\r\n\t\t\t\t\t\tmarker.iconPath = '/static/images/marker.png'\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn marker\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 点击非标点区域\r\n\t\t\ttap ({ detail }) {\r\n\t\t\t\t// 刚点击标点时禁止关闭\r\n\t\t\t\tif (this.isNowSelectDevice) return false\r\n\t\t\t\t// 选择的设备清空\r\n\t\t\t\tthis.selectDevice = null\r\n\t\t\t\t/**\r\n\t\t\t\t * latitude: 34.694883979754955\n\t\t\t\t * longitude: 113.6627661146589\r\n\t\t\t\t */\r\n\t\t\t\t// 标点按钮恢复正常大小\r\n\t\t\t\tthis.markers = this.markers.map(marker => {\r\n\t\t\t\t\tmarker.width = baseSize + 'px'\r\n\t\t\t\t\tmarker.height = baseSize + 'px'\r\n\t\t\t\t\tmarker.iconPath = '/static/images/marker.png'\r\n\t\t\t\t\treturn marker\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 右下角图标绑定的事件：点击右下角图标触发\r\n\t\t\tcontroltap(e) {\r\n\t\t\t  // 创建 map 上下文 MapContext 对象。建议使用 wx.createSelectorQuery 获取 context 对象\r\n\t\t\t  // 获取地图，map要与wxml页面的id名一致。注意：不需要#符号\r\n\t\t\t \r\n\t\t\t  \r\n\t\t\t  // 将地图中心移置当前定位点，此时需设置地图组件 show-location 为true。'2.8.0' 起支持将地图中心移动到指定位置。\r\n\t\t\t  this.mpCtx.moveToLocation()\r\n\t\t\t \r\n\t\t\t  // 将地图缩放值改为初始值\r\n\t\t\t  this.scale = 16\r\n\t\t\t},\r\n\t\t\tupdated (detail) {\r\n\t\t\t\tconsole.log('updated', detail)\r\n\t\t\t},\r\n\t\t\t// 显示范围改变\r\n\t\t\tregionchange ({detail}) {\r\n\t\t\t\tconsole.log('regionchange', detail.centerLocation)\r\n\t\t\t\tif (detail.centerLocation) {\r\n\t\t\t\t\tthis.mapLongitude = detail.centerLocation.longitude // 地图中心所处位置\r\n\t\t\t\t\tthis.mapLatitude = detail.centerLocation.latitude\r\n\t\t\t\t\tthis.getDeviceList(\r\n\t\t\t\t\t\tthis.mapLongitude,\r\n\t\t\t\t\t\tthis.mapLatitude,\r\n\t\t\t\t\t\tthis.longitude,\r\n\t\t\t\t\t\tthis.latitude,\r\n\t\t\t\t\t\tthis.current,\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t// 唤起内置地图查看位置\r\n\t\t\topenLocation () {\r\n\t\t\t\tconst selectMarker = this.markers.find(marker => marker.id === this.selectDevice)\r\n\t\t\t\tif (!selectMarker) return false\r\n\t\t\t\tuni.getLocation({\r\n\t\t\t\t\ttype: 'gcj02', //返回可以用于uni.openLocation的经纬度\r\n\t\t\t\t\tsuccess:  (res) => {\r\n\t\t\t\t\t\tconst latitude = selectMarker.latitude;\r\n\t\t\t\t\t\tconst longitude = selectMarker.longitude;\r\n\t\t\t\t\t\tuni.openLocation({\r\n\t\t\t\t\t\t\tlatitude: latitude,\r\n\t\t\t\t\t\t\tlongitude: longitude,\r\n\t\t\t\t\t\t\tscale: 16,\r\n\t\t\t\t\t\t\tname: this.selectDevice,\r\n\t\t\t\t\t\t\taddress: '中国河南郑州管城回族区',\r\n\t\t\t\t\t\t\tsuccess: function () {\r\n\t\t\t\t\t\t\t\tconsole.log('success');\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: function (res) {\r\n\t\t\t\t\t\t\t\tconsole.log('fail', res);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\ttoggleMode (mode) {\r\n\t\t\t\tthis.mode = mode\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\tpage {\r\n\t\t\r\n\t\t.page-body {\r\n\t\t\twidth: 100vw;\r\n\t\t\theight: 100vh;\r\n\t\t\tbackground-color: #f5f7fa;\r\n\t\t\t.header {\r\n\t\t\t\theight: 80rpx;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.contral-position {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tright: 20rpx;\r\n\t\t\t\ttop: 100rpx;\r\n\t\t\t\twidth: 60rpx;\r\n\t\t\t\theight: 60rpx;\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tborder-radius: 60rpx;\r\n\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.map-section ::v-deep .m-device-info{\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: 15rpx;\r\n\t\t\t\tright:15rpx;\r\n\t\t\t\tbottom: 100rpx;\r\n\t\t\t\tz-index: 99;\r\n\t\t\t}\r\n\t\t\t.list-section ::v-deep {\r\n\t\t\t\t.m-device-list {\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tmargin-bottom: 24rpx;\r\n\t\t\t\t}\r\n\t\t\t\t.m-device-info {\r\n\t\t\t\t\tmargin-bottom: 24rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1667618040830\n      var cssReload = require(\"C:/Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}