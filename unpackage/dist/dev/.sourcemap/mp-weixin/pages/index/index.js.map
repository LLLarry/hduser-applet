{"version":3,"sources":["uni-app:///main.js","webpack:///E:/工作区/hd-resource/hduser-applet/pages/index/index.vue?5119","webpack:///E:/工作区/hd-resource/hduser-applet/pages/index/index.vue?f2ce","webpack:///E:/工作区/hd-resource/hduser-applet/pages/index/index.vue?e9b3","webpack:///E:/工作区/hd-resource/hduser-applet/pages/index/index.vue?bb92","uni-app:///pages/index/index.vue","webpack:///E:/工作区/hd-resource/hduser-applet/pages/index/index.vue?372c","webpack:///E:/工作区/hd-resource/hduser-applet/pages/index/index.vue?9c17"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,6F,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACoM;AACpM,gBAAgB,6MAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,sQAEN;AACP,KAAK;AACL;AACA,aAAa,4QAEN;AACP,KAAK;AACL;AACA,aAAa,sNAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChDA;AAAA;AAAA;AAAA;AAA0vB,CAAgB,+wBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0D9wB,+D;AACA,kB;AACA;AACA,MADA,kBACA;AACA;AACA;AACA;AACA,qBADA;AAEA,gBAFA;AAGA,eAHA,EADA;;AAMA;AACA,oBADA;AAEA,gBAFA;AAGA,eAHA,EANA,CADA;;;AAaA,gBAbA,EAaA;AACA,iBAdA,EAcA;AACA,cAfA,EAeA;;AAEA,eAjBA,EAiBA;AACA,iCAlBA,EAkBA;AACA,iCAnBA;AAoBA,oCApBA,EAoBA;AACA,oCArBA;AAsBA,iBAtBA,EAsBA;AACA,wBAvBA,EAuBA;AACA,iBAxBA,EAwBA;AACA,8BAzBA,EAyBA;AACA,kBA1BA;;AA4BA,GA9BA;AA+BA,QA/BA,oBA+BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GApDA;AAqDA,SArDA,qBAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OARA;AASA,UATA,gBASA,GATA,EASA;AACA;AACA,OAXA;;AAaA,GAzEA;AA0EA;AACA;AACA;AACA,aADA,mBACA,CADA,EACA;AACA;AACA,OAHA,EAFA;;AAOA;AACA,aADA,qBACA;AACA;AACA,yBADA;AAEA,wBAFA;AAGA,sBAHA;AAIA,qBAJA;AAKA,oBALA;;AAOA;AACA,OAVA,EAPA,EA1EA;;;AA8FA;AACA;;;;;;AAMA,iBAPA,yBAOA,SAPA,EAOA,QAPA,EAOA,UAPA,EAOA,SAPA,EAOA,IAPA,EAOA;AACA;AACA,wCADA;AAEA,sCAFA;AAGA,0CAHA;AAIA,wCAJA;AAKA,8BALA;AAMA,iDANA,GADA,+CACA,IADA,yBACA,IADA,CACA,OADA,yBACA,OADA,CACA,MADA,yBACA,MADA;;AASA;AACA;AACA;AACA,iBAHA,MAGA;AACA;AACA,kCADA;;AAGA,iBAhBA;AAiBA,KAxBA;AAyBA;AACA,mBA1BA,2BA0BA,IA1BA,EA0BA;AACA,oDADA,gDACA,IADA,yBACA,IADA,CACA,OADA,yBACA,OADA,CACA,MADA,yBACA,MADA;AAEA,4BAFA;AAGA,sBAHA;;AAKA;AACA,gCADA,IALA;;AAQA,uCARA;;AAUA,KApCA;AAqCA,iBArCA,yBAqCA,KArCA,EAqCA;AACA;AACA;AACA,KAxCA;AAyCA;AACA,WA1CA,mBA0CA,IA1CA,EA0CA;AACA;AACA,WADA,CACA,MADA,CACA,MADA,4BACA,EADA;AAEA,cAFA,CAEA,QAFA,KAEA,SAFA,uBAEA,QAFA,uBAEA,IAFA,GAEA,MAFA,CAEA,IAFA;AAGA;AACA;AACA,8BADA;AAEA,gCAFA;AAGA,8CAHA;AAIA,4BAJA;AAKA,+BALA;AAMA,gCANA;AAOA,8BAPA,CAOA;AAPA;AASA;AACA;AACA,4BADA;AAEA,8BAFA;AAGA,6CAHA;AAIA,0BAJA;AAKA,yBALA;AAMA,0BANA;AAOA,4BAPA,CAOA;AAPA;AASA,OAvBA;AAwBA,KAnEA;AAoEA;AACA,cArEA,wBAqEA;AACA;AACA;AACA,6BADA;AAEA,mBAFA,CAEA;AAFA;AAIA,KA3EA;AA4EA;AACA,aA7EA,2BA6EA;AACA;AACA;AAFA,0CAGA,8DAHA,QAGA,MAHA;AAIA;AACA;AACA,iBAFA,EAEA,GAFA;AAGA;AACA,wBARA,GAQA,0FARA;AASA;AACA,+BADA;AAEA,yBAFA;AAGA,oBAHA;AAIA;AACA,iDAdA;AAeA,KA5FA;;AA8FA;AACA,mBA/FA,2BA+FA,QA/FA,EA+FA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA,OAZA;AAaA,KA9GA;AA+GA;AACA,OAhHA,sBAgHA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA,KAhIA;AAiIA;AACA,cAlIA,sBAkIA,CAlIA,EAkIA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA,KA5IA;AA6IA,WA7IA,mBA6IA,MA7IA,EA6IA;AACA;AACA,KA/IA;AAgJA;AACA,gBAjJA,+BAiJA;AACA;AACA,4DADA,CACA;AACA;AACA;AACA,yBADA;AAEA,wBAFA;AAGA,sBAHA;AAIA,qBAJA;AAKA,oBALA;;AAOA;;AAEA,KA9JA;AA+JA;AACA,gBAhKA,0BAgKA;AACA;AACA;AACA;AACA,qBADA,EACA;AACA;AACA;AACA;AACA;AACA,8BADA;AAEA,gCAFA;AAGA,qBAHA;AAIA,qCAJA;AAKA,kCALA;AAMA;AACA;AACA,aARA;AASA;AACA;AACA,aAXA;;AAaA,SAlBA;;AAoBA,KAvLA;AAwLA,cAxLA,sBAwLA,IAxLA,EAwLA;AACA;AACA,KA1LA;AA2LA;AACA,eA5LA,uBA4LA,QA5LA,EA4LA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,OANA,MAMA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA,KA3MA;AA4MA,UA5MA,oBA4MA;AACA;AACA,KA9MA,EA9FA,E;;;;;;;;;;;;;AC5DA;AAAA;AAAA;AAAA;AAAy7C,CAAgB,s5CAAG,EAAC,C;;;;;;;;;;;ACA78C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57280228\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=57280228&scoped=true&\"","var components\ntry {\n  components = {\n    uSearch: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-search/u-search\" */ \"@/uni_modules/uview-ui/components/u-search/u-search.vue\"\n      )\n    },\n    mSubsection: function() {\n      return import(\n        /* webpackChunkName: \"components/m-subsection/m-subsection\" */ \"@/components/m-subsection/m-subsection.vue\"\n      )\n    },\n    mDeviceInfo: function() {\n      return import(\n        /* webpackChunkName: \"components/m-device-info/m-device-info\" */ \"@/components/m-device-info/m-device-info.vue\"\n      )\n    },\n    mDeviceList: function() {\n      return import(\n        /* webpackChunkName: \"components/m-device-list/m-device-list\" */ \"@/components/m-device-list/m-device-list.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"page-body d-flex flex-column position-relative\">\r\n\t\t<view class=\"header position-relative\" :class=\"{ active: mode === 'list' }\">\r\n\t\t\t<view class=\"padding-2\" v-if=\"mode === 'list'\">\r\n\t\t\t\t<u-search :animation=\"true\" inputAlign=\"center\" height=\"72rpx\" v-model=\"keywords\" @search=\"search\" @custom=\"search\"></u-search>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"d-flex bg-white header-box header-contral\">\r\n\t\t\t\t<view class=\"flex-1 m-subsection-box\">\r\n\t\t\t\t\t<m-subsection :list=\"tabList\" :currentIndex=\"current\" @change=\"sectionChange\"></m-subsection>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"map-list-box padding-x-2 d-flex align-items-center justify-content-center\">\r\n\t\t\t\t\t<view class=\"d-flex align-items-center\" v-if=\"mode === 'list'\" @click=\"toggleMode('map')\">\r\n\t\t\t\t\t\t<text class=\"iconfont icon-ditu text-666 margin-right-1 text-success\"></text>\r\n\t\t\t\t\t\t<text class=\"text-666 text-size-md text-success\" >地图</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"d-flex align-items-center\" v-else @click=\"toggleMode('list')\">\r\n\t\t\t\t\t\t<text class=\"iconfont icon-liebiao text-666 margin-right-1 text-success\"></text>\r\n\t\t\t\t\t\t<text class=\"text-666 text-size-md text-success\" >列表</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bg-mask bg-white position-absolute\"></view>\r\n\t\t</view>\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t<view class=\"map-section page-section page-section-gap flex-1 position-relative overflow-hidden\" v-show=\"mode === 'map'\">\r\n\t\t\t<map\r\n\t\t\t\tid=\"map\"\r\n\t\t\t\tstyle=\"width: 100%; height:100%;\"\r\n\t\t\t\t:longitude=\"longitude\"\r\n\t\t\t\t:latitude=\"latitude\"\r\n\t\t\t\t:scale=\"scale\"\r\n\t\t\t\t:show-location=\"true\"\r\n\t\t\t\t:enable-rotate=\"true\"\r\n\t\t\t\t@markertap=\"markertap\"\r\n\t\t\t\t@tap=\"tap\"\r\n\t\t\t\t@updated=\"updated\"\r\n\t\t\t\t@regionchange=\"regionchange\"\r\n\t\t\t>\r\n\t\t\t\t  <!-- <cover-view class=\"cover-view\" @click=\"controltap\">\r\n\t\t\t\t\t<cover-image class=\"station\" src=\"https://linli-oss.vecommunity.com/xchx/icon/position.jpg\"></cover-image>\r\n\t\t\t\t  </cover-view> -->\r\n\t\t\t</map>\r\n\t\t\t<!-- 空间 -->\r\n\t\t\t<view class=\"contral-position\" @click=\"controltap\">\r\n\t\t\t\t<image src=\"https://linli-oss.vecommunity.com/xchx/icon/position.jpg\" mode=\"\"></image>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<m-device-info :coverView=\"coverView\" v-if=\"selectDevice\" :info=\"selectDevice\" />\r\n\t\t</view>\r\n\t\t<view class=\"list-section page-section page-section-gap flex-1 position-relative overflow-hidden\" v-if=\"mode === 'list'\">\r\n\t\t\t<m-device-list :list=\"list\" :keywords=\"keywords\" ref=\"m-device-list\" />\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { getDevicesByPoint, getEquipmentDate } from '@/api/home/index.js'\r\n\tconst baseSize = 34\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttabList: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '两轮电瓶车',\r\n\t\t\t\t\t\twidth: 0,\r\n\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '电动汽车',\r\n\t\t\t\t\t\twidth: 0,\r\n\t\t\t\t\t\tleft: 0\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tcurrent: 0, // 当前设备类型 0 两轮电动车 1 电动汽车\r\n\t\t\t\tmarkers: [], // 地图标点数据\r\n\t\t\t\tlist: [], // 获取到的设备信息\r\n\t\t\t\t\r\n\t\t\t\tscale: 16, // 缩放级别\r\n\t\t\t\tlongitude: 116.397228240966, // 目前人处于的位置\r\n\t\t\t\tlatitude: 39.90960456049752,\r\n\t\t\t\tmapLongitude: 116.397228240966, // 地图中心所处位置\r\n\t\t\t\tmapLatitude: 39.90960456049752,\r\n\t\t\t\tmpCtx: null, // 地图实例\r\n\t\t\t\tselectDevice: null, // 选择的设备信息\r\n\t\t\t\tmode: 'map', // 当前模式 map / list\r\n\t\t\t\tisNowSelectDevice: false, // 是否正在选中Device事件，选中后200ms关闭\r\n\t\t\t\tkeywords: '',\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad () {           \r\n\r\n\t\t\t// uni.login({\r\n\t\t\t//     success: function (res) {\r\n\t\t\t// \t\tauthorization({\r\n\t\t\t// \t\t\tcode: res.code\r\n\t\t\t// \t\t}).then(res => {\r\n\t\t\t// \t\t\tuni.showModal({\r\n\t\t\t// \t\t\t\ttitle: '提示',\r\n\t\t\t// \t\t\t\tcontent: JSON.stringify(res),\r\n\t\t\t// \t\t\t\tsuccess: function (res) {\r\n\t\t\t// \t\t\t\t\tif (res.confirm) {\r\n\t\t\t// \t\t\t\t\t\tconsole.log('用户点击确定');\r\n\t\t\t// \t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t// \t\t\t\t\t\tconsole.log('用户点击取消');\r\n\t\t\t// \t\t\t\t\t}\r\n\t\t\t// \t\t\t\t}\r\n\t\t\t// \t\t\t});\r\n\t\t\t// \t\t})\r\n\t\t\t// \t},\r\n\t\t\t// })\r\n\t\t},\r\n\t\tmounted () {\r\n\t\t\tthis.mpCtx = uni.createMapContext('map', this)\r\n\t\t\t// this.mpCtx.initMarkerCluster({\r\n\t\t\t// \tenableDefaultStyle: true,\r\n\t\t\t// \tzoomOnClick: true,\r\n\t\t\t// \tgridSize: 50\r\n\t\t\t// })\r\n\t\t\tuni.getLocation({\r\n\t\t\t\ttype: 'wgs84',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tthis.longitude = res.longitude\r\n\t\t\t\t\tthis.latitude = res.latitude\r\n\t\t\t\t\t// console.log('当前位置的经度：' + res.longitude);\r\n\t\t\t\t\t// console.log('当前位置的纬度：' + res.latitude);\r\n\t\t\t\t\tthis.mpCtx.moveToLocation()\r\n\t\t\t\t},\r\n\t\t\t\tfail (res) {\r\n\t\t\t\t\t// console.log('fail', res)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\t// 监听地图markers的改变，阿静覆盖物重新渲染\r\n\t\t\tmarkers: {\r\n\t\t\t\thandler (v) {\r\n\t\t\t\t\tthis.setMarkers()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcurrent: {\r\n\t\t\t\thandler () {\r\n\t\t\t\t\tthis.getDeviceList(\r\n\t\t\t\t\t\tthis.mapLongitude,\r\n\t\t\t\t\t\tthis.mapLatitude,\r\n\t\t\t\t\t\tthis.longitude,\r\n\t\t\t\t\t\tthis.latitude,\r\n\t\t\t\t\t\tthis.current\r\n\t\t\t\t\t)\r\n\t\t\t\t\tthis.selectDevice = null\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/** 获取设备信息通过经纬度\r\n\t\t\t * @param {Object} longitude 搜索设备的经度\r\n\t\t\t * @param {Object} latitude 搜索设备的纬度\r\n\t\t\t * @param {Object} cLongitude 人的经度 （目的是计算当前位置与设备位置之间的距离）\r\n\t\t\t * @param {Object} cLatitude 人的纬度 （目的是计算当前位置与设备位置之间的距离）\r\n\t\t\t */\r\n\t\t\tasync getDeviceList (longitude, latitude, cLongitude, cLatitude, type) {\r\n\t\t\t\tconst { code, message, result } = await getDevicesByPoint({\r\n\t\t\t\t\tlongitude,\r\n\t\t\t\t\tlatitude,\r\n\t\t\t\t\tcLongitude,\r\n\t\t\t\t\tcLatitude,\r\n\t\t\t\t\ttype,\r\n\t\t\t\t\trange: type === 0 ? 50 : 5000\r\n\t\t\t\t})\r\n\t\t\t\tif (code === 200) {\r\n\t\t\t\t\tthis.list = result\r\n\t\t\t\t\tthis.markers = this.fmtData(result)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: message\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 获取设备详细信息\r\n\t\t\tasync getDeviceDetail (data) {\r\n\t\t\t\tconst { code, message, result } = await getEquipmentDate(data)\r\n\t\t\t\tif (code === 200) {\r\n\t\t\t\t\treturn result\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: message\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn Promise.reject(message)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsectionChange (index) {\r\n\t\t\t\tthis.current = index\r\n\t\t\t\tthis.keywords = ''\r\n\t\t\t},\r\n\t\t\t// 格式化小区的数据\r\n\t\t\tfmtData (json) {\r\n\t\t\t\treturn json.map(one => {\r\n\t\t\t\t\tconst { device = {} } = one\r\n\t\t\t\t\tconst {geoCoord: [longitude, latitude], code} = device\r\n\t\t\t\t\tif (this.selectDevice && Number(this.selectDevice.deviceNum) === Number(code)) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tlatitude,\r\n\t\t\t\t\t\t\tlongitude,\r\n\t\t\t\t\t\t\ticonPath: this.getIconPath(true),\r\n\t\t\t\t\t\t\tid: Number(code),\r\n\t\t\t\t\t\t\twidth: (baseSize + 8),\r\n\t\t\t\t\t\t\theight: baseSize + 8,\r\n\t\t\t\t\t\t\tjoinCluster: false // 参与点聚合\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tlatitude,\r\n\t\t\t\t\t\tlongitude,\r\n\t\t\t\t\t\ticonPath: this.getIconPath(false),\r\n\t\t\t\t\t\tid: Number(code),\r\n\t\t\t\t\t\twidth: baseSize,\r\n\t\t\t\t\t\theight: baseSize,\r\n\t\t\t\t\t\tjoinCluster: false // 参与点聚合\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 更新marks\r\n\t\t\tsetMarkers () {\r\n\t\t\t\t// 新的markers给添加上去\r\n\t\t\t\tthis.mpCtx.addMarkers({\r\n\t\t\t\t\tmarkers: this.markers,\r\n\t\t\t\t\tclear: true // 先清空地图上的点\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 点击地图标点\r\n\t\t\tasync markertap ({ markerId }) {\r\n\t\t\t\tthis.isNowSelectDevice = true\r\n\t\t\t\t// 获取设备的详细信息\r\n\t\t\t\tconst result = await this.getDeviceDetail([markerId.toString().padStart(6, '0')])\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.isNowSelectDevice = false\r\n\t\t\t\t}, 200)\r\n\t\t\t\t// 筛选出符合条件的设备\r\n\t\t\t\tconst findItem = this.list.find(item => Number.parseInt(item.device.code) === markerId)\r\n\t\t\t\tthis.selectDevice = findItem ? {\r\n\t\t\t\t\t...findItem.device,\r\n\t\t\t\t\t...result[0]\r\n\t\t\t\t} : null\r\n\t\t\t\t// 选中的marker点放大，其他的marker点缩小\r\n\t\t\t\tthis.selectMarkerFun(markerId)\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 选中的marker点放大，其他的marker点缩小\r\n\t\t\tselectMarkerFun (markerId) {\r\n\t\t\t\t// 点击的标点放大，其他的标点缩小\r\n\t\t\t\tthis.markers = this.markers.map(marker => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (markerId === marker.id) {\r\n\t\t\t\t\t\tmarker.width = (baseSize + 8)\r\n\t\t\t\t\t\tmarker.height = (baseSize + 8)\r\n\t\t\t\t\t\tmarker.iconPath = this.getIconPath(true)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmarker.width = baseSize\r\n\t\t\t\t\t\tmarker.height = baseSize\r\n\t\t\t\t\t\tmarker.iconPath =  this.getIconPath(false)\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn marker\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 点击非标点区域\r\n\t\t\ttap ({ detail }) {\r\n\t\t\t\t// 刚点击标点时禁止关闭\r\n\t\t\t\tif (this.isNowSelectDevice) return false\r\n\t\t\t\t// 选择的设备清空\r\n\t\t\t\tthis.selectDevice = null\r\n\t\t\t\t/**\r\n\t\t\t\t * latitude: 34.694883979754955\r\n\t\t\t\t * longitude: 113.6627661146589\r\n\t\t\t\t */\r\n\t\t\t\t// 标点按钮恢复正常大小\r\n\t\t\t\tthis.markers = this.markers.map(marker => {\r\n\t\t\t\t\tmarker.width = baseSize\r\n\t\t\t\t\tmarker.height = baseSize\r\n\t\t\t\t\tmarker.iconPath = this.getIconPath(false)\r\n\t\t\t\t\treturn marker\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 右下角图标绑定的事件：点击右下角图标触发\r\n\t\t\tcontroltap(e) {\r\n\t\t\t  // 创建 map 上下文 MapContext 对象。建议使用 wx.createSelectorQuery 获取 context 对象\r\n\t\t\t  // 获取地图，map要与wxml页面的id名一致。注意：不需要#符号\r\n\t\t\t \r\n\t\t\t  \r\n\t\t\t  // 将地图中心移置当前定位点，此时需设置地图组件 show-location 为true。'2.8.0' 起支持将地图中心移动到指定位置。\r\n\t\t\t  this.mpCtx.moveToLocation()\r\n\t\t\t \r\n\t\t\t  // 将地图缩放值改为初始值\r\n\t\t\t  this.scale = 16\r\n\t\t\t},\r\n\t\t\tupdated (detail) {\r\n\t\t\t\t// console.log('updated', detail)\r\n\t\t\t},\r\n\t\t\t// 显示范围改变\r\n\t\t\tregionchange ({detail}) {\r\n\t\t\t\tif (detail.centerLocation) {\r\n\t\t\t\t\tthis.mapLongitude = detail.centerLocation.longitude // 地图中心所处位置\r\n\t\t\t\t\tthis.mapLatitude = detail.centerLocation.latitude\r\n\t\t\t\t\tthis.getDeviceList(\r\n\t\t\t\t\t\tthis.mapLongitude,\r\n\t\t\t\t\t\tthis.mapLatitude,\r\n\t\t\t\t\t\tthis.longitude,\r\n\t\t\t\t\t\tthis.latitude,\r\n\t\t\t\t\t\tthis.current,\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t// 唤起内置地图查看位置\r\n\t\t\topenLocation () {\r\n\t\t\t\tconst selectMarker = this.markers.find(marker => marker.id === this.selectDevice)\r\n\t\t\t\tif (!selectMarker) return false\r\n\t\t\t\tuni.getLocation({\r\n\t\t\t\t\ttype: 'gcj02', //返回可以用于uni.openLocation的经纬度\r\n\t\t\t\t\tsuccess:  (res) => {\r\n\t\t\t\t\t\tconst latitude = selectMarker.latitude;\r\n\t\t\t\t\t\tconst longitude = selectMarker.longitude;\r\n\t\t\t\t\t\tuni.openLocation({\r\n\t\t\t\t\t\t\tlatitude: latitude,\r\n\t\t\t\t\t\t\tlongitude: longitude,\r\n\t\t\t\t\t\t\tscale: 16,\r\n\t\t\t\t\t\t\tname: this.selectDevice,\r\n\t\t\t\t\t\t\taddress: '中国河南郑州管城回族区',\r\n\t\t\t\t\t\t\tsuccess: function () {\r\n\t\t\t\t\t\t\t\t// console.log('success');\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: function (res) {\r\n\t\t\t\t\t\t\t\t// console.log('fail', res);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\ttoggleMode (mode) {\r\n\t\t\t\tthis.mode = mode\r\n\t\t\t},\r\n\t\t\t// 获取图片路径\r\n\t\t\tgetIconPath (isActive) {\r\n\t\t\t\tif (this.current === 0) { // 两轮电车桩\r\n\t\t\t\t\tif (isActive) { // 选中\r\n\t\t\t\t\t\treturn '/static/images/bake.png'\r\n\t\t\t\t\t} else { // 未选中\r\n\t\t\t\t\t\treturn '/static/images/bake.png'\r\n\t\t\t\t\t}\r\n\t\t\t\t} else { // 汽车桩\r\n\t\t\t\t\tif (isActive) { // 选中\r\n\t\t\t\t\t\t// return '/static/images/marker_car_active.png'\r\n\t\t\t\t\t\treturn '/static/images/car.png'\r\n\t\t\t\t\t} else { // 未选中\r\n\t\t\t\t\t\treturn '/static/images/car.png'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsearch (...v) {\r\n\t\t\t\tthis.$refs['m-device-list'].search(...v)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\tpage {\r\n\t\t\r\n\t\t.page-body {\r\n\t\t\twidth: 100vw;\r\n\t\t\theight: 100vh;\r\n\t\t\tbackground-color: #f3f3f3;\r\n\t\t\t.header {\r\n\t\t\t\t.header-box {\r\n\t\t\t\t\theight: 80rpx;\r\n\t\t\t\t}\r\n\t\t\t\t.bg-mask {\r\n\t\t\t\t\tleft: 0;\r\n\t\t\t\t\ttop: 0;\r\n\t\t\t\t\tbottom: 0;\r\n\t\t\t\t\tright:0;\r\n\t\t\t\t\tz-index: -1;\r\n\t\t\t\t\tborder-radius: 0 0 32rpx 32rpx;\r\n\t\t\t\t}\r\n\t\t\t\t&.active {\r\n\t\t\t\t\tz-index: 1;\r\n\t\t\t\t\t.header-box {\r\n\t\t\t\t\t\tmargin: 0 20rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t.header-contral {\r\n\t\t\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\tbox-shadow: 6rpx 6rpx 10rpx #eee, -6rpx -6rpx 10rpx #eee;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t.bg-mask {\r\n\t\t\t\t\t\tbottom: 40rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.contral-position {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tright: 20rpx;\r\n\t\t\t\ttop: 100rpx;\r\n\t\t\t\twidth: 60rpx;\r\n\t\t\t\theight: 60rpx;\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tborder-radius: 60rpx;\r\n\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.map-section ::v-deep .m-device-info{\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: 25rpx;\r\n\t\t\t\tright:25rpx;\r\n\t\t\t\tbottom: 100rpx;\r\n\t\t\t\tz-index: 99;\r\n\t\t\t\t// background-color: #f1faf5;\r\n\t\t\t}\r\n\t\t\t.list-section ::v-deep {\r\n\t\t\t\t.m-device-list {\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tmargin-bottom: 24rpx;\r\n\t\t\t\t}\r\n\t\t\t\t.m-device-info {\r\n\t\t\t\t\tmargin-bottom: 24rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.map-list-box {\r\n\t\t\t\tbackground-color: #bce4cd;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n</style>\r\n","import mod from \"-!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1670583204558\n      var cssReload = require(\"D:/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}